# LearnFast Core Engine Environment Configuration
#
# NOTE: For Docker-in-WSL setups, leave connection URIs empty for auto-detection.
# The system will automatically detect the correct host (localhost, WSL IP, etc.)
#
# For production deployments, set the following environment variables:
# - FRONTEND_URL: The URL where your frontend is hosted
# - BACKEND_URL: The URL where your backend is hosted (for frontend to connect)

# =============================================================================
# DATABASE CONNECTIONS (Auto-detected if empty)
# =============================================================================

# Neo4j Configuration
# Leave NEO4J_URI empty for auto-detection (recommended for WSL/Docker setups)
# Or set explicitly: neo4j://localhost:7688
NEO4J_URI=bolt://localhost:7688
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# PostgreSQL Configuration
# Leave POSTGRES_HOST empty for auto-detection, or set to localhost
POSTGRES_HOST=
POSTGRES_PORT=5433
POSTGRES_DB=learnfast
POSTGRES_USER=learnfast
POSTGRES_PASSWORD=password

# SurrealDB Configuration
SURREAL_URL=ws://localhost:8000/rpc
SURREAL_USER=root
SURREAL_PASSWORD=root
SURREAL_NAMESPACE=open_notebook
SURREAL_DATABASE=open_notebook

# Redis (Optional) - for background queue processing
REDIS_URL=redis://localhost:6379/0
REDIS_QUEUE_NAME=learnfast
REDIS_JOB_TIMEOUT=3600
RQ_ENABLED=false

# =============================================================================
# LLM & AI SERVICES
# =============================================================================

# LLM Configuration (Unified)
LLM_PROVIDER=ollama
LLM_MODEL=gpt-oss:120b-cloud
OLLAMA_BASE_URL=http://host.docker.internal:11434
USE_OPIK=False
OPIK_API_KEY=...
OPIK_WORKSPACE=...
OPIK_URL_OVERRIDE=
OPIK_PROJECT=learnfast-core
OPIK_USE_LOCAL=false

# Granular Model Overrides (Optional)
EXTRACTION_MODEL=gpt-oss:120b-cloud
EXTRACTION_CONTEXT_WINDOW=100000
EXTRACTION_MAX_CHARS=50000
REWRITE_MODEL=gpt-oss:20b-cloud
REWRITE_CONTEXT_WINDOW=10000

# Embedding Configuration
EMBEDDING_PROVIDER=ollama
EMBEDDING_MODEL=embeddinggemma:latest
EMBEDDING_CONCURRENCY=4

# =============================================================================
# SERVER & NETWORK CONFIGURATION
# =============================================================================

# Backend Server Configuration
PORT=8001
HOST=0.0.0.0

# Frontend URL (used for CORS, email links, OAuth callbacks)
# Auto-detected if empty. Set explicitly for production:
# FRONTEND_URL=https://your-app.example.com
FRONTEND_URL=http://localhost:5173

# CORS Origins (comma-separated list)
# Auto-detected from FRONTEND_URL if empty/commented
# Example: http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173
# CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# Backend URL for Frontend (Vite dev server proxy)
# Set this if your backend is not on localhost:8001
# VITE_BACKEND_URL=http://localhost:8001

# Docker Host Override (leave empty for auto-detection)
# Set this if Docker is in WSL and auto-detection fails
DOCKER_HOST_OVERRIDE=

# =============================================================================
# EXTERNAL SERVICE INTEGRATION
# =============================================================================

# Fitbit OAuth
FITBIT_CLIENT_ID=
FITBIT_CLIENT_SECRET=
# Auto-built from FRONTEND_URL if empty:
FITBIT_REDIRECT_URI=

# Email Service (Resend)
RESEND_API_KEY=
RESEND_FROM_EMAIL=onboarding@resend.dev
RESEND_REPLY_DOMAIN=

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

CHUNK_SIZE_MINUTES=2
MAX_PATH_PREVIEW_DEPTH=3
DEFAULT_EMBEDDING_DIMENSION=1024
