openapi: 3.1.0
info:
  title: LearnFast Core Engine
  description: Hybrid Graph-RAG Learning Platform API
  version: 0.1.0
paths:
  /api/documents/upload:
    post:
      tags:
      - documents
      summary: Upload Document
      description: "Uploads a new study document and extracts its content.\n\nProcesses\
        \ the file (PDF or Image), saves it to disk (via DocumentStore), \nand uses\
        \ the DocumentProcessor to extract text."
      operationId: upload_document_api_documents_upload_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_document_api_documents_upload_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/youtube:
    post:
      tags:
      - documents
      summary: Ingest transcripts from a YouTube video
      description: 'Ingest transcripts from a YouTube URL.

        Fetches transcript, saves as a virtual document, and processes it.'
      operationId: ingest_youtube_api_documents_youtube_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Body_ingest_youtube_api_documents_youtube_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/:
    get:
      tags:
      - documents
      summary: Get Documents
      description: Retrieves a list of documents with optional filtering.
      operationId: get_documents_api_documents__get
      parameters:
      - name: folder_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Folder Id
      - name: tag
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tag
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DocumentResponse'
                title: Response Get Documents Api Documents  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/{document_id}:
    get:
      tags:
      - documents
      summary: Get Document
      description: Retrieves a specific document's metadata.
      operationId: get_document_api_documents__document_id__get
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - documents
      summary: Update Document
      description: Updates document metadata (title, tags, category, folder).
      operationId: update_document_api_documents__document_id__put
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DocumentCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - documents
      summary: Delete Document
      description: Deletes a document and its file.
      operationId: delete_document_api_documents__document_id__delete
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/{document_id}/move:
    put:
      tags:
      - documents
      summary: Move Document
      description: Moves a document to a different folder (or unfiles it).
      operationId: move_document_api_documents__document_id__move_put
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Body_move_document_api_documents__document_id__move_put'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/{document_id}/session/start:
    post:
      tags:
      - documents
      summary: Start Reading Session
      description: Starts a time tracking session for a document.
      operationId: start_reading_session_api_documents__document_id__session_start_post
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/documents/{document_id}/session/end:
    post:
      tags:
      - documents
      summary: End Reading Session
      description: Ends a time tracking session and updates progress.
      operationId: end_reading_session_api_documents__document_id__session_end_post
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: integer
          title: Document Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TimeTrackingRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/flashcards/:
    post:
      tags:
      - flashcards
      summary: Create Flashcard
      description: "Creates a new flashcard in the database.\n\nArgs:\n    flashcard\
        \ (FlashcardCreate): Schema containing front, back, and optional document_id.\n\
        \    db (Session): Database session.\n    \nReturns:\n    FlashcardResponse:\
        \ The created flashcard record.\n    \nRaises:\n    HTTPException: If the\
        \ specified document_id does not exist."
      operationId: create_flashcard_api_flashcards__post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FlashcardCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlashcardResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - flashcards
      summary: Get Flashcards
      description: Retrieves flashcards with optional filtering by document or tag.
      operationId: get_flashcards_api_flashcards__get
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 100
          title: Limit
      - name: document_id
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Document Id
      - name: tag
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tag
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FlashcardResponse'
                title: Response Get Flashcards Api Flashcards  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/flashcards/due:
    get:
      tags:
      - flashcards
      summary: Get Due Flashcards
      description: 'Retrieves flashcards that are scheduled for review (next_review
        <= now).

        Cards are ordered by their due date (earliest first).'
      operationId: get_due_flashcards_api_flashcards_due_get
      parameters:
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FlashcardResponse'
                title: Response Get Due Flashcards Api Flashcards Due Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/flashcards/{flashcard_id}:
    get:
      tags:
      - flashcards
      summary: Get Flashcard
      description: Retrieves a single flashcard by its ID.
      operationId: get_flashcard_api_flashcards__flashcard_id__get
      parameters:
      - name: flashcard_id
        in: path
        required: true
        schema:
          type: string
          title: Flashcard Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlashcardResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - flashcards
      summary: Update Flashcard
      description: Updates the content (front, back, tags) of an existing flashcard.
      operationId: update_flashcard_api_flashcards__flashcard_id__put
      parameters:
      - name: flashcard_id
        in: path
        required: true
        schema:
          type: string
          title: Flashcard Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FlashcardUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlashcardResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - flashcards
      summary: Delete Flashcard
      description: Permanently deletes a flashcard from the library.
      operationId: delete_flashcard_api_flashcards__flashcard_id__delete
      parameters:
      - name: flashcard_id
        in: path
        required: true
        schema:
          type: string
          title: Flashcard Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/study/session:
    post:
      tags:
      - study
      summary: Start Study Session
      description: "Initializes a new study session to track a group of card reviews.\n\
        \nArgs:\n    db (Session): Database session.\n    \nReturns:\n    StudySessionResponse:\
        \ The newly created session object."
      operationId: start_study_session_api_study_session_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudySessionResponse'
  /api/study/session/{session_id}/review:
    post:
      tags:
      - study
      summary: Submit Review
      description: "Submits a review for a flashcard and updates its SRS parameters.\n\
        \nCalculates the next review date using the SM-2 algorithm based on \nthe\
        \ user's rating for the card.\n\nArgs:\n    session_id (str): ID of the active\
        \ study session.\n    review (StudyReviewCreate): Review data including card\
        \ ID and recall rating.\n    db (Session): Database session.\n    \nReturns:\n\
        \    dict: Success message and new SRS status for the card.\n    \nRaises:\n\
        \    HTTPException: If session or flashcard is not found, or rating is invalid."
      operationId: submit_review_api_study_session__session_id__review_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudyReviewCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/study/session/{session_id}/end:
    post:
      tags:
      - study
      summary: End Study Session
      description: Finalizes a study session and calculates aggregate performance
        stats.
      operationId: end_study_session_api_study_session__session_id__end_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudySessionResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/study/sessions:
    get:
      tags:
      - study
      summary: Get Study Sessions
      description: Retrieves a historical list of study sessions.
      operationId: get_study_sessions_api_study_sessions_get
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudySessionResponse'
                title: Response Get Study Sessions Api Study Sessions Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/study/upcoming:
    get:
      tags:
      - study
      summary: Get Upcoming Reviews
      description: "Forecasts upcoming reviews for the specified date range.\n\nArgs:\n\
        \    days (int): Number of days to look ahead (default: 7).\n    db (Session):\
        \ Database session.\n    \nReturns:\n    dict: A schedule mapping ISO dates\
        \ to lists of due flashcards."
      operationId: get_upcoming_reviews_api_study_upcoming_get
      parameters:
      - name: days
        in: query
        required: false
        schema:
          type: integer
          default: 7
          title: Days
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/folders/:
    get:
      tags:
      - folders
      summary: Get Folders
      description: Retrieves all folders along with their document counts.
      operationId: get_folders_api_folders__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FolderResponse'
                type: array
                title: Response Get Folders Api Folders  Get
    post:
      tags:
      - folders
      summary: Create Folder
      description: "Creates a new folder for organizing documents.\n\nArgs:\n    folder\
        \ (FolderCreate): Schema with name, color, and icon.\n    db (Session): Database\
        \ session.\n    \nReturns:\n    FolderResponse: The newly created folder record."
      operationId: create_folder_api_folders__post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FolderCreate'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FolderResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/folders/{folder_id}:
    get:
      tags:
      - folders
      summary: Get Folder
      description: Retrieves a single folder by its ID.
      operationId: get_folder_api_folders__folder_id__get
      parameters:
      - name: folder_id
        in: path
        required: true
        schema:
          type: string
          title: Folder Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FolderResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - folders
      summary: Update Folder
      description: Updates a folder's properties (name, color, or icon).
      operationId: update_folder_api_folders__folder_id__put
      parameters:
      - name: folder_id
        in: path
        required: true
        schema:
          type: string
          title: Folder Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FolderUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FolderResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - folders
      summary: Delete Folder
      description: Deletes a folder and moves its documents to the 'unfiled' state.
      operationId: delete_folder_api_folders__folder_id__delete
      parameters:
      - name: folder_id
        in: path
        required: true
        schema:
          type: string
          title: Folder Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/analytics/activity:
    get:
      tags:
      - analytics
      summary: Get Recent Activity
      description: Retrieves the most recent activity log entries.
      operationId: get_recent_activity_api_analytics_activity_get
      parameters:
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 10
          title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ActivityLogResponse'
                title: Response Get Recent Activity Api Analytics Activity Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/analytics/overview:
    get:
      tags:
      - analytics
      summary: Get Analytics Overview
      description: "Compiles an overview of all learning metrics for the dashboard.\n\
        \nIncludes totals for documents/flashcards, current study streak, \nretention\
        \ rate, and SRS distribution.\n\nArgs:\n    db (Session): Database session.\n\
        \    \nReturns:\n    AnalyticsOverview: Aggregated stats for the user's dashboard."
      operationId: get_analytics_overview_api_analytics_overview_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnalyticsOverview'
  /api/analytics/performance:
    get:
      tags:
      - analytics
      summary: Get Performance Trends
      description: Retrieves performance trends (reviews and ratings) over a period
        of time.
      operationId: get_performance_trends_api_analytics_performance_get
      parameters:
      - name: days
        in: query
        required: false
        schema:
          type: integer
          default: 30
          title: Days
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudyStats'
                title: Response Get Performance Trends Api Analytics Performance Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/analytics/heatmap:
    get:
      tags:
      - analytics
      summary: Get Study Heatmap
      description: "Retrieves study activity data for a heatmap visualization .\n\n\
        Returns:\n    dict: Mapping of ISO dates to review counts."
      operationId: get_study_heatmap_api_analytics_heatmap_get
      parameters:
      - name: days
        in: query
        required: false
        schema:
          type: integer
          default: 365
          title: Days
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/analytics/retention:
    get:
      tags:
      - analytics
      summary: Get Retention Metrics
      description: "Retrieves detailed retention statistics, including successful\
        \ vs failure \nreview ratios and rating distribution."
      operationId: get_retention_metrics_api_analytics_retention_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/analytics/time-tracking:
    get:
      tags:
      - analytics
      summary: Get Time Tracking Stats
      description: Retrieves reading time and estimated completion stats for all documents.
      operationId: get_time_tracking_stats_api_analytics_time_tracking_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/ai/test:
    get:
      tags:
      - AI Generation
      summary: Test Endpoint
      description: Simple health check for the AI router.
      operationId: test_endpoint_api_ai_test_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/ai/generate-flashcards:
    post:
      tags:
      - AI Generation
      summary: Generate Flashcards
      description: Generates flashcards from a document.
      operationId: generate_flashcards_api_ai_generate_flashcards_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/ai/generate-questions:
    post:
      tags:
      - AI Generation
      summary: Generate Questions
      description: Generates multiple-choice questions from a document.
      operationId: generate_questions_api_ai_generate_questions_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/ai/learning-path:
    post:
      tags:
      - AI Generation
      summary: Generate Learning Path
      description: "Generates a structured learning path/curriculum.\n\nAttempts to\
        \ resolve path using Knowledge Graph first. \nFalls back to LLM generation\
        \ if no graph path found or if document context provided."
      operationId: generate_learning_path_api_ai_learning_path_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PathRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/concepts/roots:
    get:
      tags:
      - navigation
      summary: Get root concepts
      description: Get all concepts with no prerequisites.
      operationId: get_root_concepts_api_concepts_roots_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ConceptNode'
                type: array
                title: Response Get Root Concepts Api Concepts Roots Get
  /api/concepts/unlocked/{user_id}:
    get:
      tags:
      - navigation
      summary: Get unlocked concepts for user
      description: Get concepts available for the user to start.
      operationId: get_unlocked_concepts_api_concepts_unlocked__user_id__get
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ConceptNode'
                title: Response Get Unlocked Concepts Api Concepts Unlocked  User
                  Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/learning/lesson/{user_id}/{target_concept}:
    get:
      tags:
      - navigation
      summary: Get formatted lesson content
      description: 'Get full lesson content (text) for a path to target.

        Convenience endpoint that resolves path + retrieves content.'
      operationId: get_lesson_content_api_learning_lesson__user_id___target_concept__get
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      - name: target_concept
        in: path
        required: true
        schema:
          type: string
          title: Target Concept
      - name: time_budget
        in: query
        required: false
        schema:
          type: integer
          default: 30
          title: Time Budget
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/progress/start:
    post:
      tags:
      - navigation
      summary: Mark concept in progress
      description: Mark a concept as started (IN_PROGRESS).
      operationId: start_concept_api_progress_start_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProgressUpdate'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/progress/complete:
    post:
      tags:
      - navigation
      summary: Mark concept completed
      description: Mark a concept as COMPLETED.
      operationId: complete_concept_api_progress_complete_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProgressUpdate'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/progress/{user_id}:
    get:
      tags:
      - navigation
      summary: Get full user state
      description: Get user's completed, in-progress, and available concepts.
      operationId: get_user_progress_api_progress__user_id__get
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          title: User Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserState'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /:
    get:
      summary: Root
      operationId: root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
components:
  schemas:
    ActivityLogResponse:
      properties:
        id:
          type: integer
          title: Id
        activity_type:
          type: string
          title: Activity Type
        description:
          type: string
          title: Description
        timestamp:
          type: string
          format: date-time
          title: Timestamp
        document_id:
          anyOf:
          - type: integer
          - type: 'null'
          title: Document Id
        extra_data:
          additionalProperties: true
          type: object
          title: Extra Data
          default: {}
      type: object
      required:
      - id
      - activity_type
      - description
      - timestamp
      title: ActivityLogResponse
      description: Schema for user activity log entries.
    AnalyticsOverview:
      properties:
        total_documents:
          type: integer
          title: Total Documents
        total_flashcards:
          type: integer
          title: Total Flashcards
        total_reviews:
          type: integer
          title: Total Reviews
        cards_due_today:
          type: integer
          title: Cards Due Today
        study_streak:
          type: integer
          title: Study Streak
        retention_rate:
          type: number
          title: Retention Rate
        total_time_spent:
          type: integer
          title: Total Time Spent
          default: 0
        avg_completion_time:
          type: number
          title: Avg Completion Time
          default: 0
        srs_distribution:
          additionalProperties: true
          type: object
          title: Srs Distribution
          default:
            new: 0
            learning: 0
            mastered: 0
      type: object
      required:
      - total_documents
      - total_flashcards
      - total_reviews
      - cards_due_today
      - study_streak
      - retention_rate
      title: AnalyticsOverview
      description: Global statistics and overview data.
    Body_ingest_youtube_api_documents_youtube_post:
      properties:
        url:
          type: string
          title: Url
      type: object
      required:
      - url
      title: Body_ingest_youtube_api_documents_youtube_post
    Body_move_document_api_documents__document_id__move_put:
      properties:
        folder_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Folder Id
      type: object
      title: Body_move_document_api_documents__document_id__move_put
    Body_upload_document_api_documents_upload_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        title:
          type: string
          title: Title
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
          default: ''
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        folder_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Folder Id
      type: object
      required:
      - file
      - title
      title: Body_upload_document_api_documents_upload_post
    CardType:
      type: string
      enum:
      - basic
      - cloze
      title: CardType
      description: Enum for flashcard types.
    ConceptNode:
      properties:
        name:
          type: string
          title: Name
          description: Unique concept name (lowercase)
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: Concept description
        depth_level:
          anyOf:
          - type: integer
          - type: 'null'
          title: Depth Level
          description: Depth in prerequisite hierarchy
      type: object
      required:
      - name
      title: ConceptNode
      description: Represents a concept node in the knowledge graph.
    DocumentCreate:
      properties:
        title:
          type: string
          title: Title
        tags:
          items:
            type: string
          type: array
          title: Tags
          default: []
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        folder_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Folder Id
      type: object
      required:
      - title
      title: DocumentCreate
      description: Schema for creating a new document.
    DocumentResponse:
      properties:
        title:
          type: string
          title: Title
        tags:
          items:
            type: string
          type: array
          title: Tags
          default: []
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        id:
          type: integer
          title: Id
        file_type:
          $ref: '#/components/schemas/FileType'
          default: other
        file_path:
          type: string
          title: File Path
        upload_date:
          type: string
          format: date-time
          title: Upload Date
        extracted_text:
          anyOf:
          - type: string
          - type: 'null'
          title: Extracted Text
        reading_progress:
          type: number
          title: Reading Progress
          default: 0.0
        folder_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Folder Id
        time_spent_reading:
          type: integer
          title: Time Spent Reading
          default: 0
        last_opened:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Last Opened
        first_opened:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: First Opened
        completion_estimate:
          anyOf:
          - type: integer
          - type: 'null'
          title: Completion Estimate
        page_count:
          type: integer
          title: Page Count
          default: 0
      type: object
      required:
      - title
      - id
      - file_path
      - upload_date
      title: DocumentResponse
      description: Schema for document API responses.
    FileType:
      type: string
      enum:
      - pdf
      - image
      - other
      title: FileType
      description: Enum for supported document file types.
    FlashcardCreate:
      properties:
        front:
          type: string
          title: Front
        back:
          type: string
          title: Back
        card_type:
          $ref: '#/components/schemas/CardType'
          default: basic
        tags:
          items:
            type: string
          type: array
          title: Tags
          default: []
        document_id:
          anyOf:
          - type: integer
          - type: 'null'
          title: Document Id
      type: object
      required:
      - front
      - back
      title: FlashcardCreate
      description: Schema for creating a new flashcard.
    FlashcardResponse:
      properties:
        front:
          type: string
          title: Front
        back:
          type: string
          title: Back
        card_type:
          $ref: '#/components/schemas/CardType'
          default: basic
        tags:
          items:
            type: string
          type: array
          title: Tags
          default: []
        id:
          type: string
          title: Id
        document_id:
          anyOf:
          - type: integer
          - type: 'null'
          title: Document Id
        created_at:
          type: string
          format: date-time
          title: Created At
        ease_factor:
          type: number
          title: Ease Factor
        interval:
          type: integer
          title: Interval
        repetitions:
          type: integer
          title: Repetitions
        next_review:
          type: string
          format: date-time
          title: Next Review
        last_review:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Last Review
      type: object
      required:
      - front
      - back
      - id
      - document_id
      - created_at
      - ease_factor
      - interval
      - repetitions
      - next_review
      - last_review
      title: FlashcardResponse
      description: Schema for flashcard API responses, including SRS data.
    FlashcardUpdate:
      properties:
        front:
          anyOf:
          - type: string
          - type: 'null'
          title: Front
        back:
          anyOf:
          - type: string
          - type: 'null'
          title: Back
        tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Tags
      type: object
      title: FlashcardUpdate
      description: Schema for updating an existing flashcard.
    FolderCreate:
      properties:
        name:
          type: string
          title: Name
        color:
          type: string
          title: Color
          default: '#8b5cf6'
        icon:
          type: string
          title: Icon
          default: folder
      type: object
      required:
      - name
      title: FolderCreate
      description: Schema for creating a new folder.
    FolderResponse:
      properties:
        name:
          type: string
          title: Name
        color:
          type: string
          title: Color
          default: '#8b5cf6'
        icon:
          type: string
          title: Icon
          default: folder
        id:
          type: string
          title: Id
        created_at:
          type: string
          format: date-time
          title: Created At
        document_count:
          type: integer
          title: Document Count
          default: 0
      type: object
      required:
      - name
      - id
      - created_at
      title: FolderResponse
      description: Schema for folder API responses.
    FolderUpdate:
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
        color:
          anyOf:
          - type: string
          - type: 'null'
          title: Color
        icon:
          anyOf:
          - type: string
          - type: 'null'
          title: Icon
      type: object
      title: FolderUpdate
      description: Schema for updating an existing folder.
    GenerateRequest:
      properties:
        document_id:
          type: integer
          title: Document Id
        count:
          type: integer
          title: Count
          default: 5
        llm_config:
          anyOf:
          - $ref: '#/components/schemas/LLMConfig'
          - type: 'null'
      type: object
      required:
      - document_id
      title: GenerateRequest
      description: Request schema for flashcard/question generation.
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    LLMConfig:
      properties:
        provider:
          type: string
          title: Provider
          default: openai
        api_key:
          anyOf:
          - type: string
          - type: 'null'
          title: Api Key
        base_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Base Url
        model:
          anyOf:
          - type: string
          - type: 'null'
          title: Model
      type: object
      title: LLMConfig
      description: Configuration overrides for LLM generation.
    PathRequest:
      properties:
        user_id:
          type: string
          title: User Id
        target_concept:
          type: string
          title: Target Concept
        time_budget_minutes:
          type: integer
          title: Time Budget Minutes
          default: 60
        document_id:
          anyOf:
          - type: integer
          - type: 'null'
          title: Document Id
      type: object
      required:
      - user_id
      - target_concept
      title: PathRequest
      description: Request for generating a learning path.
    ProgressUpdate:
      properties:
        user_id:
          type: string
          title: User Id
        concept_name:
          type: string
          title: Concept Name
      type: object
      required:
      - user_id
      - concept_name
      title: ProgressUpdate
      description: Request for updating concept progress.
    StudyReviewCreate:
      properties:
        flashcard_id:
          type: string
          title: Flashcard Id
        rating:
          type: integer
          maximum: 5.0
          minimum: 0.0
          title: Rating
        time_taken:
          anyOf:
          - type: integer
          - type: 'null'
          title: Time Taken
      type: object
      required:
      - flashcard_id
      - rating
      title: StudyReviewCreate
      description: Schema for submitting a card review.
    StudySessionResponse:
      properties:
        id:
          type: string
          title: Id
        start_time:
          type: string
          format: date-time
          title: Start Time
        end_time:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: End Time
        cards_reviewed:
          type: integer
          title: Cards Reviewed
        new_cards:
          type: integer
          title: New Cards
        review_cards:
          type: integer
          title: Review Cards
        average_rating:
          anyOf:
          - type: number
          - type: 'null'
          title: Average Rating
      type: object
      required:
      - id
      - start_time
      - end_time
      - cards_reviewed
      - new_cards
      - review_cards
      - average_rating
      title: StudySessionResponse
      description: Schema for study session statistics.
    StudyStats:
      properties:
        date:
          type: string
          title: Date
        cards_reviewed:
          type: integer
          title: Cards Reviewed
        new_cards:
          type: integer
          title: New Cards
        average_rating:
          type: number
          title: Average Rating
      type: object
      required:
      - date
      - cards_reviewed
      - new_cards
      - average_rating
      title: StudyStats
      description: Daily study performance statistics.
    TimeTrackingRequest:
      properties:
        seconds_spent:
          type: integer
          title: Seconds Spent
        reading_progress:
          anyOf:
          - type: number
          - type: 'null'
          title: Reading Progress
      type: object
      required:
      - seconds_spent
      title: TimeTrackingRequest
      description: Request schema for updating document reading time.
    UserState:
      properties:
        user_id:
          type: string
          title: User Id
        completed_concepts:
          items:
            type: string
          type: array
          title: Completed Concepts
        in_progress_concepts:
          items:
            type: string
          type: array
          title: In Progress Concepts
        available_concepts:
          items:
            type: string
          type: array
          title: Available Concepts
      type: object
      required:
      - user_id
      - completed_concepts
      - in_progress_concepts
      - available_concepts
      title: UserState
      description: Represents current user progress and available options.
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
